============================= test session starts =============================
platform win32 -- Python 3.12.6, pytest-8.3.4, pluggy-1.5.0 -- C:\Python312\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\cabra\Projects\LifeOS
configfile: pytest.ini
plugins: anyio-4.7.0, asyncio-1.3.0, cov-6.2.1, mockito-0.0.4
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function
collecting ... collected 88 items

tests_recursive/test_opencode_gate_policy.py::TestNormalizePath::test_backslash_conversion PASSED [  1%]
tests_recursive/test_opencode_gate_policy.py::TestNormalizePath::test_strip_leading_dot_slash PASSED [  2%]
tests_recursive/test_opencode_gate_policy.py::TestNormalizePath::test_collapse_repeated_slashes PASSED [  3%]
tests_recursive/test_opencode_gate_policy.py::TestNormalizePath::test_lowercase PASSED [  4%]
tests_recursive/test_opencode_gate_policy.py::TestNormalizePath::test_gemini_case PASSED [  5%]
tests_recursive/test_opencode_gate_policy.py::TestNormalizePath::test_mixed_normalization PASSED [  6%]
tests_recursive/test_opencode_gate_policy.py::TestPathSecurity::test_traversal_blocked PASSED [  7%]
tests_recursive/test_opencode_gate_policy.py::TestPathSecurity::test_absolute_unix_blocked PASSED [  9%]
tests_recursive/test_opencode_gate_policy.py::TestPathSecurity::test_absolute_windows_blocked PASSED [ 10%]
tests_recursive/test_opencode_gate_policy.py::TestPathSecurity::test_normal_path_allowed PASSED [ 11%]
tests_recursive/test_opencode_gate_policy.py::TestDenylistMatching::test_denylist_root_config PASSED [ 12%]
tests_recursive/test_opencode_gate_policy.py::TestDenylistMatching::test_denylist_root_foundations PASSED [ 13%]
tests_recursive/test_opencode_gate_policy.py::TestDenylistMatching::test_denylist_root_governance PASSED [ 14%]
tests_recursive/test_opencode_gate_policy.py::TestDenylistMatching::test_denylist_exact_gemini PASSED [ 15%]
tests_recursive/test_opencode_gate_policy.py::TestDenylistMatching::test_denylist_extension_py PASSED [ 17%]
tests_recursive/test_opencode_gate_policy.py::TestDenylistMatching::test_allowed_path_not_denied PASSED [ 18%]
tests_recursive/test_opencode_gate_policy.py::TestDenylistMatching::test_case_bypass_gemini PASSED [ 19%]
tests_recursive/test_opencode_gate_policy.py::TestDenylistMatching::test_case_bypass_foundations PASSED [ 20%]
tests_recursive/test_opencode_gate_policy.py::TestExtensionRestriction::test_md_allowed PASSED [ 21%]
tests_recursive/test_opencode_gate_policy.py::TestExtensionRestriction::test_json_blocked PASSED [ 22%]
tests_recursive/test_opencode_gate_policy.py::TestExtensionRestriction::test_txt_blocked PASSED [ 23%]
tests_recursive/test_opencode_gate_policy.py::TestExtensionRestriction::test_double_extension_blocked PASSED [ 25%]
tests_recursive/test_opencode_gate_policy.py::TestReviewPacketsAddOnly::test_add_md_allowed PASSED [ 26%]
tests_recursive/test_opencode_gate_policy.py::TestReviewPacketsAddOnly::test_modify_blocked PASSED [ 27%]
tests_recursive/test_opencode_gate_policy.py::TestReviewPacketsAddOnly::test_delete_blocked PASSED [ 28%]
tests_recursive/test_opencode_gate_policy.py::TestReviewPacketsAddOnly::test_non_md_blocked PASSED [ 29%]
tests_recursive/test_opencode_gate_policy.py::TestGitStatusParsing::test_parse_add PASSED [ 30%]
tests_recursive/test_opencode_gate_policy.py::TestGitStatusParsing::test_parse_modify PASSED [ 31%]
tests_recursive/test_opencode_gate_policy.py::TestGitStatusParsing::test_parse_delete PASSED [ 32%]
tests_recursive/test_opencode_gate_policy.py::TestGitStatusParsing::test_parse_rename PASSED [ 34%]
tests_recursive/test_opencode_gate_policy.py::TestGitStatusParsing::test_parse_empty PASSED [ 35%]
tests_recursive/test_opencode_gate_policy.py::TestBlockedOpsDetection::test_delete_blocked PASSED [ 36%]
tests_recursive/test_opencode_gate_policy.py::TestBlockedOpsDetection::test_rename_blocked PASSED [ 37%]
tests_recursive/test_opencode_gate_policy.py::TestBlockedOpsDetection::test_copy_blocked PASSED [ 38%]
tests_recursive/test_opencode_gate_policy.py::TestBlockedOpsDetection::test_add_modify_not_blocked PASSED [ 39%]
tests_recursive/test_opencode_gate_policy.py::TestIndexDiscovery::test_governance_index_excluded PASSED [ 40%]
tests_recursive/test_opencode_gate_policy.py::TestIndexDiscovery::test_docs_root_index_included PASSED [ 42%]
tests_recursive/test_opencode_gate_policy.py::TestIndexDiscovery::test_review_packets_not_in_index PASSED [ 43%]
tests_recursive/test_opencode_gate_policy.py::TestHashing::test_hash_format PASSED [ 44%]
tests_recursive/test_opencode_gate_policy.py::TestTruncation::test_no_truncation_small PASSED [ 45%]
tests_recursive/test_opencode_gate_policy.py::TestTruncation::test_truncation_footer_format PASSED [ 46%]
tests_recursive/test_opencode_gate_policy.py::TestRunnerLogHygiene::test_runner_source_no_ellipses_in_logs PASSED [ 47%]
tests_recursive/test_opencode_gate_policy.py::TestSymlinkDefense::test_symlink_reason_code_exists PASSED [ 48%]
tests_recursive/test_opencode_gate_policy.py::TestSymlinkDefense::test_symlink_filesystem_regular_file PASSED [ 50%]
tests_recursive/test_opencode_gate_policy.py::TestSymlinkDefense::test_symlink_filesystem_detects_symlink SKIPPED [ 51%]
tests_recursive/test_opencode_gate_policy.py::TestSymlinkDefense::test_symlink_in_parent_path SKIPPED [ 52%]
tests_recursive/test_opencode_gate_policy.py::TestGoldenFixturesRenameCopy::test_golden_rename_r100 PASSED [ 53%]
tests_recursive/test_opencode_gate_policy.py::TestGoldenFixturesRenameCopy::test_golden_copy_c100 PASSED [ 54%]
tests_recursive/test_opencode_gate_policy.py::TestGoldenFixturesRenameCopy::test_golden_mixed_operations PASSED [ 55%]
tests_recursive/test_opencode_gate_policy.py::TestBoundarySafeMatching::test_docsx_does_not_match_docs PASSED [ 56%]
tests_recursive/test_opencode_gate_policy.py::TestBoundarySafeMatching::test_docs_matches_docs PASSED [ 57%]
tests_recursive/test_opencode_gate_policy.py::TestBoundarySafeMatching::test_docs_with_trailing_slashes PASSED [ 59%]
tests_recursive/test_opencode_gate_policy.py::TestBoundarySafeMatching::test_artifacts_review_packets_prefix PASSED [ 60%]
tests_recursive/test_opencode_gate_policy.py::TestBoundarySafeMatching::test_config_denylist_prefix PASSED [ 61%]
tests_recursive/test_opencode_gate_policy.py::TestCIDiffFailClosed::test_diff_exec_failed_reason_code_exists PASSED [ 62%]
tests_recursive/test_opencode_gate_policy.py::TestCIDiffFailClosed::test_refs_unavailable_reason_code_exists PASSED [ 63%]
tests_recursive/test_opencode_gate_policy.py::TestCIDiffFailClosed::test_merge_base_failed_reason_code_exists PASSED [ 64%]
tests_recursive/test_opencode_gate_policy.py::TestCIDiffFailClosedMocked::test_refs_unavailable_when_github_base_ref_missing PASSED [ 65%]
tests_recursive/test_opencode_gate_policy.py::TestCIDiffFailClosedMocked::test_refs_unavailable_when_github_sha_missing PASSED [ 67%]
tests_recursive/test_opencode_gate_policy.py::TestCIDiffFailClosedMocked::test_merge_base_failed_on_subprocess_error PASSED [ 68%]
tests_recursive/test_opencode_gate_policy.py::TestCIDiffFailClosedMocked::test_diff_exec_failed_on_exception PASSED [ 69%]
tests_recursive/test_opencode_gate_policy.py::TestCIDiffFailClosedMocked::test_successful_diff_returns_parsed_list PASSED [ 70%]
tests_recursive/test_opencode_gate_policy.py::TestSymlinkGitIndexMocked::test_git_index_symlink_mode_120000_detected PASSED [ 71%]
tests_recursive/test_opencode_gate_policy.py::TestSymlinkGitIndexMocked::test_git_index_regular_file_mode_100644_not_flagged PASSED [ 72%]
tests_recursive/test_opencode_gate_policy.py::TestSymlinkGitIndexMocked::test_git_index_executable_mode_100755_not_flagged PASSED [ 73%]
tests_recursive/test_opencode_gate_policy.py::TestSymlinkGitIndexMocked::test_git_index_empty_response_not_flagged PASSED [ 75%]
tests_recursive/test_opencode_gate_policy.py::TestSymlinkGitIndexMocked::test_git_index_exception_blocks_fail_closed PASSED [ 76%]
tests_recursive/test_opencode_gate_policy.py::TestSymlinkGitIndexMocked::test_git_index_nonzero_return_blocks_fail_closed PASSED [ 77%]
tests_recursive/test_opencode_gate_policy.py::TestBoundaryMatchingStrict::test_docsx_strictly_not_allowed PASSED [ 78%]
tests_recursive/test_opencode_gate_policy.py::TestBoundaryMatchingStrict::test_artifacts_review_packets_underscore_strictly_blocked PASSED [ 79%]
tests_recursive/test_opencode_gate_policy.py::TestBoundaryMatchingStrict::test_docs_strictly_allowed PASSED [ 80%]
tests_recursive/test_opencode_gate_policy.py::TestBoundaryMatchingStrict::test_artifacts_review_packets_strictly_allowed PASSED [ 81%]
tests_recursive/test_opencode_gate_policy.py::TestBoundaryMatchingStrict::test_root_file_strictly_blocked PASSED [ 82%]
tests_recursive/test_opencode_gate_policy.py::TestRunnerEnvelopeEnforcement::test_denylisted_path_blocked PASSED [ 84%]
tests_recursive/test_opencode_gate_policy.py::TestRunnerEnvelopeEnforcement::test_denylisted_governance_blocked PASSED [ 85%]
tests_recursive/test_opencode_gate_policy.py::TestRunnerEnvelopeEnforcement::test_denylisted_scripts_blocked PASSED [ 86%]
tests_recursive/test_opencode_gate_policy.py::TestRunnerEnvelopeEnforcement::test_outside_allowlist_blocked PASSED [ 87%]
tests_recursive/test_opencode_gate_policy.py::TestRunnerEnvelopeEnforcement::test_non_md_under_docs_blocked PASSED [ 88%]
tests_recursive/test_opencode_gate_policy.py::TestRunnerEnvelopeEnforcement::test_yaml_under_docs_blocked PASSED [ 89%]
tests_recursive/test_opencode_gate_policy.py::TestRunnerEnvelopeEnforcement::test_review_packets_modify_blocked PASSED [ 90%]
tests_recursive/test_opencode_gate_policy.py::TestRunnerEnvelopeEnforcement::test_review_packets_delete_blocked PASSED [ 92%]
tests_recursive/test_opencode_gate_policy.py::TestRunnerEnvelopeEnforcement::test_review_packets_rename_blocked PASSED [ 93%]
tests_recursive/test_opencode_gate_policy.py::TestRunnerEnvelopeEnforcement::test_review_packets_add_non_md_blocked PASSED [ 94%]
tests_recursive/test_opencode_gate_policy.py::TestRunnerEnvelopeEnforcement::test_review_packets_add_md_allowed PASSED [ 95%]
tests_recursive/test_opencode_gate_policy.py::TestRunnerEnvelopeEnforcement::test_docs_add_md_allowed PASSED [ 96%]
tests_recursive/test_opencode_gate_policy.py::TestRunnerEnvelopeEnforcement::test_docs_modify_md_allowed PASSED [ 97%]
tests_recursive/test_opencode_gate_policy.py::TestRunnerEnvelopeEnforcement::test_any_delete_blocked PASSED [ 98%]
tests_recursive/test_opencode_gate_policy.py::TestRunnerEnvelopeEnforcement::test_any_copy_blocked PASSED [100%]

======================== 86 passed, 2 skipped in 0.79s ========================
