# LifeOS Model Configuration
# Per LifeOS_Autonomous_Build_Loop_Architecture_v0.3.md ยง5.1.5
#
# Updated to current OpenCode free models (2026-02-14):
#   - kimi-k2.5-free, minimax-m2.5-free, gpt-5-nano
# Previous (2026-02-08): kimi-k2.5-free, glm-4.7-free, minimax-m2.1-free
# To revert: replace model IDs with the previous values above.

model_selection:
  # Default fallback chain for roles without overrides
  default_chain:
    - "opencode/kimi-k2.5-free"
    - "opencode/minimax-m2.5-free"
    - "opencode/gpt-5-nano"

  # Role-specific model chains
  role_overrides:
    designer:
      - "opencode/kimi-k2.5-free"
      - "opencode/minimax-m2.5-free"
      - "opencode/gpt-5-nano"

    reviewer_architect:
      - "opencode/kimi-k2.5-free"
      - "opencode/minimax-m2.5-free"
      - "opencode/gpt-5-nano"

    builder:
      - "opencode/kimi-k2.5-free"
      - "opencode/minimax-m2.5-free"
      - "opencode/gpt-5-nano"

    steward:
      - "opencode/kimi-k2.5-free"
      - "opencode/minimax-m2.5-free"
      - "opencode/gpt-5-nano"

    build_cycle:
      - "opencode/kimi-k2.5-free"
      - "opencode/minimax-m2.5-free"
      - "opencode/gpt-5-nano"


agents:
  steward:
    provider: zen
    model: "opencode/kimi-k2.5-free"
    endpoint: "https://opencode.ai/zen/v1/messages"
    api_key_env: "ZEN_STEWARD_KEY"
    fallback:
      - model: "opencode/minimax-m2.5-free"
        provider: "zen"
        api_key_env: "ZEN_STEWARD_KEY"
      - model: "opencode/gpt-5-nano"
        provider: "zen"
        api_key_env: "ZEN_STEWARD_KEY"

  builder:
    provider: opencode-openai
    model: "opencode/minimax-m2.5-free"
    api_key_env: "ZEN_BUILDER_KEY"
    fallback:
      - model: "opencode/kimi-k2.5-free"
        provider: "zen"
        api_key_env: "ZEN_BUILDER_KEY"
      - model: "opencode/gpt-5-nano"
        provider: "zen"
        api_key_env: "ZEN_BUILDER_KEY"

  designer:
    provider: zen
    model: "opencode/minimax-m2.5-free"
    endpoint: "https://opencode.ai/zen/v1/messages"
    api_key_env: "ZEN_DESIGNER_KEY"
    fallback:
      - model: "opencode/kimi-k2.5-free"
        provider: "zen"
        api_key_env: "ZEN_DESIGNER_KEY"
      - model: "opencode/gpt-5-nano"
        provider: "zen"
        api_key_env: "ZEN_DESIGNER_KEY"

  reviewer_architect:
    provider: zen
    model: "opencode/minimax-m2.5-free"
    endpoint: "https://opencode.ai/zen/v1/messages"
    api_key_env: "ZEN_REVIEWER_KEY"
    fallback:
      - model: "opencode/kimi-k2.5-free"
        provider: "zen"
        api_key_env: "ZEN_REVIEWER_KEY"
      - model: "opencode/gpt-5-nano"
        provider: "zen"
        api_key_env: "ZEN_REVIEWER_KEY"

  build_cycle:
    provider: zen
    model: "opencode/kimi-k2.5-free"
    endpoint: "https://opencode.ai/zen/v1/messages"
    api_key_env: "ZEN_BUILD_CYCLE_KEY"
    fallback:
      - model: "opencode/minimax-m2.5-free"
        provider: "zen"
        api_key_env: "ZEN_BUILD_CYCLE_KEY"
      - model: "opencode/gpt-5-nano"
        provider: "zen"
        api_key_env: "ZEN_BUILD_CYCLE_KEY"

# Zen configuration (Primary)
zen:
  base_url: "https://opencode.ai/zen/v1/messages"
  timeout_seconds: 300
  retry:
    max_attempts: 3
    backoff_base_seconds: 1.0
    backoff_multiplier: 2.0

# OpenRouter configuration (Fallback)
openrouter:
  base_url: "https://openrouter.ai/api/v1"
  timeout_seconds: 120
  retry:
    max_attempts: 3
    backoff_base_seconds: 1.0
    backoff_multiplier: 2.0
