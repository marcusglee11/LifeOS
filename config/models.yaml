# LifeOS Model Configuration
# Per LifeOS_Autonomous_Build_Loop_Architecture_v0.3.md §5.1.5
#
# Switched to free Zen models (2026-02-08) — zero cost, easily reversible.
# Previous: openrouter/x-ai/grok-4.1-fast + minimax/minimax-m2.1
# To revert: replace model IDs with the previous values above.

model_selection:
  # Default fallback chain for roles without overrides
  default_chain:
    - "opencode/kimi-k2.5-free"
    - "opencode/glm-4.7-free"
    - "opencode/minimax-m2.1-free"

  # Role-specific model chains
  role_overrides:
    designer:
      - "opencode/kimi-k2.5-free"
      - "opencode/glm-4.7-free"
      - "opencode/minimax-m2.1-free"

    reviewer_architect:
      - "opencode/kimi-k2.5-free"
      - "opencode/glm-4.7-free"
      - "opencode/minimax-m2.1-free"

    builder:
      - "opencode/kimi-k2.5-free"
      - "opencode/glm-4.7-free"
      - "opencode/minimax-m2.1-free"

    steward:
      - "opencode/kimi-k2.5-free"
      - "opencode/glm-4.7-free"
      - "opencode/minimax-m2.1-free"

    build_cycle:
      - "opencode/kimi-k2.5-free"
      - "opencode/glm-4.7-free"
      - "opencode/minimax-m2.1-free"


agents:
  steward:
    provider: zen
    model: "opencode/kimi-k2.5-free"
    endpoint: "https://opencode.ai/zen/v1/messages"
    api_key_env: "ZEN_API_KEY"
    fallback:
      - model: "opencode/glm-4.7-free"
        provider: "zen"
        api_key_env: "ZEN_API_KEY"
      - model: "opencode/minimax-m2.1-free"
        provider: "zen"
        api_key_env: "ZEN_API_KEY"

  builder:
    provider: opencode-openai
    model: "opencode/kimi-k2.5-free"
    endpoint: "https://opencode.ai/zen/v1/messages"
    api_key_env: "ZEN_API_KEY"
    fallback:
      - model: "opencode/glm-4.7-free"
        provider: "zen"
        api_key_env: "ZEN_API_KEY"
      - model: "opencode/minimax-m2.1-free"
        provider: "zen"
        api_key_env: "ZEN_API_KEY"

  designer:
    provider: zen
    model: "opencode/kimi-k2.5-free"
    endpoint: "https://opencode.ai/zen/v1/messages"
    api_key_env: "ZEN_API_KEY"
    fallback:
      - model: "opencode/glm-4.7-free"
        provider: "zen"
        api_key_env: "ZEN_API_KEY"
      - model: "opencode/minimax-m2.1-free"
        provider: "zen"
        api_key_env: "ZEN_API_KEY"

  reviewer_architect:
    provider: zen
    model: "opencode/kimi-k2.5-free"
    endpoint: "https://opencode.ai/zen/v1/messages"
    api_key_env: "ZEN_API_KEY"
    fallback:
      - model: "opencode/glm-4.7-free"
        provider: "zen"
        api_key_env: "ZEN_API_KEY"
      - model: "opencode/minimax-m2.1-free"
        provider: "zen"
        api_key_env: "ZEN_API_KEY"

  build_cycle:
    provider: zen
    model: "opencode/kimi-k2.5-free"
    endpoint: "https://opencode.ai/zen/v1/messages"
    api_key_env: "ZEN_API_KEY"
    fallback:
      - model: "opencode/glm-4.7-free"
        provider: "zen"
        api_key_env: "ZEN_API_KEY"
      - model: "opencode/minimax-m2.1-free"
        provider: "zen"
        api_key_env: "ZEN_API_KEY"

# Zen configuration (Primary)
zen:
  base_url: "https://opencode.ai/zen/v1/messages"
  timeout_seconds: 120
  retry:
    max_attempts: 3
    backoff_base_seconds: 1.0
    backoff_multiplier: 2.0

# OpenRouter configuration (Fallback)
openrouter:
  base_url: "https://openrouter.ai/api/v1"
  timeout_seconds: 120
  retry:
    max_attempts: 3
    backoff_base_seconds: 1.0
    backoff_multiplier: 2.0
