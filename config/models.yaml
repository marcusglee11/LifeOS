# LifeOS Model Configuration
# Per LifeOS_Autonomous_Build_Loop_Architecture_v0.3.md §5.1.5
#
# Updated 2026-02-20: Switched to paid Claude models via Zen endpoint.
# Verified: claude-sonnet-4-5 accepted by Zen with x-api-key auth.
#
# History:
#   - 2026-02-14: kimi-k2.5-free, minimax-m2.5-free, gpt-5-nano
#   - 2026-02-19: kimi-k2.5-free, glm-5-free, minimax-m2.5-free, gpt-5-nano
#     Stage 1.5: glm-5-free best for YAML; kimi-k2.5-free best for agentic
#   - 2026-02-20: claude-sonnet-4-5 (paid, via Zen) — first full loop PASS
#
# To revert to free models, replace claude-sonnet-4-5 with opencode/glm-5-free

model_selection:
  # Default fallback chain for roles without overrides
  default_chain:
    - "claude-sonnet-4-5"
    - "opencode/glm-5-free"
    - "opencode/minimax-m2.5-free"

  # Role-specific model chains
  role_overrides:
    designer:
      - "claude-sonnet-4-5"
      - "opencode/glm-5-free"
      - "opencode/minimax-m2.5-free"

    reviewer_architect:
      - "claude-sonnet-4-5"
      - "opencode/glm-5-free"
      - "opencode/minimax-m2.5-free"

    builder:
      - "claude-sonnet-4-5"
      - "opencode/glm-5-free"
      - "opencode/minimax-m2.5-free"

    steward:
      - "claude-sonnet-4-5"
      - "opencode/glm-5-free"
      - "opencode/minimax-m2.5-free"

    build_cycle:
      - "claude-sonnet-4-5"
      - "opencode/glm-5-free"
      - "opencode/minimax-m2.5-free"


agents:
  steward:
    provider: zen
    model: "claude-sonnet-4-5"
    endpoint: "https://opencode.ai/zen/v1/messages"
    api_key_env: "ZEN_STEWARD_KEY"
    fallback:
      - model: "opencode/glm-5-free"
        provider: "zen"
        api_key_env: "ZEN_STEWARD_KEY"
      - model: "opencode/minimax-m2.5-free"
        provider: "zen"
        api_key_env: "ZEN_STEWARD_KEY"

  builder:
    provider: zen
    model: "claude-sonnet-4-5"
    endpoint: "https://opencode.ai/zen/v1/messages"
    api_key_env: "ZEN_BUILDER_KEY"
    fallback:
      - model: "opencode/glm-5-free"
        provider: "zen"
        api_key_env: "ZEN_BUILDER_KEY"
      - model: "opencode/minimax-m2.5-free"
        provider: "zen"
        api_key_env: "ZEN_BUILDER_KEY"

  designer:
    provider: zen
    model: "claude-sonnet-4-5"
    endpoint: "https://opencode.ai/zen/v1/messages"
    api_key_env: "ZEN_DESIGNER_KEY"
    fallback:
      - model: "opencode/glm-5-free"
        provider: "zen"
        api_key_env: "ZEN_DESIGNER_KEY"
      - model: "opencode/minimax-m2.5-free"
        provider: "zen"
        api_key_env: "ZEN_DESIGNER_KEY"

  reviewer_architect:
    provider: zen
    model: "claude-sonnet-4-5"
    endpoint: "https://opencode.ai/zen/v1/messages"
    api_key_env: "ZEN_REVIEWER_KEY"
    fallback:
      - model: "opencode/glm-5-free"
        provider: "zen"
        api_key_env: "ZEN_REVIEWER_KEY"
      - model: "opencode/minimax-m2.5-free"
        provider: "zen"
        api_key_env: "ZEN_REVIEWER_KEY"

  build_cycle:
    provider: zen
    model: "claude-sonnet-4-5"
    endpoint: "https://opencode.ai/zen/v1/messages"
    api_key_env: "ZEN_BUILD_CYCLE_KEY"
    fallback:
      - model: "opencode/glm-5-free"
        provider: "zen"
        api_key_env: "ZEN_BUILD_CYCLE_KEY"
      - model: "opencode/minimax-m2.5-free"
        provider: "zen"
        api_key_env: "ZEN_BUILD_CYCLE_KEY"

# Zen configuration (Primary)
zen:
  base_url: "https://opencode.ai/zen/v1/messages"
  timeout_seconds: 300
  retry:
    max_attempts: 3
    backoff_base_seconds: 1.0
    backoff_multiplier: 2.0

# OpenRouter configuration (Fallback)
openrouter:
  base_url: "https://openrouter.ai/api/v1"
  timeout_seconds: 120
  retry:
    max_attempts: 3
    backoff_base_seconds: 1.0
    backoff_multiplier: 2.0
